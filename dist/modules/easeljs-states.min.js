/*! SpringRoll 0.3.27 */
!function(){"use strict";!function(){var a,b,c,d=include("createjs.Container"),e=function(){c||(c=include("springroll.Application"),a=include("springroll.easeljs.DwellTimer",!1),b=include("springroll.Animator",!1)),d.call(this),this.app=c.instance,this.game=this.app,this.config=this.app.config,this.background=null},f=extend(e,d);f.setup=function(){},f.teardown=function(){var a=this.children.slice();this.cleanupChildren.apply(this,a)},f.cleanupChildren=function(c){var d,e,f=arguments.length;for(e=0;e<f;e++)(d=arguments[e])&&(Array.isArray(d)&&d.length>0?this.cleanupChildren.apply(this,d):(a&&a.destroy(d),b&&b.stop(d,!0),d.stop&&d.stop(),d.destroy&&d.destroy(),d.removeAllChildren&&d.removeAllChildren(!0),this.contains(d)&&this.removeChild(d)))},f.destroy=function(){this.app=null,this.game=null,this.config=null,this.background=null,this.removeAllChildren()},namespace("springroll.easeljs").BasePanel=e}(),function(a){var b,c,d,e,f,g,h=include("springroll.State"),i=function(a,i){if(c||(c=include("springroll.Application"),e=include("springroll.easeljs.BasePanel"),d=include("springroll.ListTask"),f=include("springroll.TaskManager"),b=include("springroll.Debug",!1),g=include("springroll.easeljs.AssetManager")),!(a instanceof e))throw"springroll.State requires the panel be a springroll.easeljs.BasePanel";i=Object.merge({manifest:[],useManifest:!0},i||{}),h.call(this,a,i),this.app=c.instance,this.game=this.app,this.voPlayer=this.app.voPlayer,this.sound=this.app.sound,this.config=this.app.config,this.scaling=this.app.scaling,this.scalingItems=i.scaling||null,this.manifest=i.manifest,this.assetsLoaded=!1,this.useManifest=i.useManifest},j=h.prototype,k=extend(i,h);k._internalEntering=function(){j._internalEntering.call(this),this.loadingStart(),this.assetsLoaded=!1;var a=[];this.useManifest&&this.manifest.length&&g.load(this.manifest,a),this.addTasks(a),a.length?f.process(a,this._onLoaded.bind(this)):this._onLoaded()},k._internalExit=function(){j._internalExit.call(this),this.assetsLoaded&&(this.scaling&&(this.scaling.removeBackground(this.panel.background),this.scaling.removeItems(this.panel)),this.panel.teardown(),this.useManifest&&this.manifest.length&&g.unload(this.manifest),this.assetsLoaded=!1)},k.addTasks=function(a){},k.onAssetsLoaded=function(){},k._onLoaded=function(){if(this.assetsLoaded=!0,this.panel.setup(),this.scaling){var a=this.scalingItems||(this.config&&this.config.scaling?this.config.scaling[this.stateId]:null);if(a){this.scaling.addItems(this.panel,a);var b=this.panel.background;b&&b.image&&this.scaling.addBackground(b)}else this.panel.x=this.panel.y=0,this.panel.scaleX=this.panel.scaleY=1,this.scaling.addItem(this.panel,{align:"top-left",titleSafe:!0})}this.onAssetsLoaded(),this.loadingDone()},k.destroy=function(){this.manifest=null,this.game=null,this.config=null,this.voPlayer=null,this.scaling=null,this.sound=null,this.app=null,this.panel.destroy(),j.destroy.apply(this)},namespace("springroll.easeljs").BaseState=i}(),function(a){var b,c,d,e=include("springroll.ApplicationPlugin"),f=new e;f.setup=function(){this.options.add("manifestsPath",null,!0),this.options.override("fps",30),this.options.override("display",include("springroll.easeljs.EaselJSDisplay")),this.options.override("displayOptions",{clearView:!0}),this.options.override("canvasId","stage"),b=include("springroll.Debug",!1),c=include("springroll.LoadTask"),d=include("springroll.easeljs.BaseState"),this._manifests={},Object.defineProperty(this,"manifests",{get:function(){return this._manifests}}),this.once("loading",function(a){var b=this.options.manifestsPath;b&&a.push(new c("manifests",b,g.bind(this)))})};var g=function(a,b,c){Object.merge(this._manifests,a.content),this.trigger("manifestLoaded",c)};f.teardown=function(){this._manifests=null}}();}();